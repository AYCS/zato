
# Create a CA

$ openssl req -batch -new -x509 -newkey rsa:2048 -extensions v3_ca -keyout \
    ca-material/ca-key.pem -out ca-material/ca-cert.pem -days 3650 \
    -config ./openssl.conf -passout file:./ca-material/ca-password

# Create a CSR

$ openssl req -batch -new -nodes -out ./cluster/CLUST.01/server/ESB.DEV.1/server-csr.pem \
    -extensions v3_server -keyout ./cluster/CLUST.01/server/ESB.DEV.1/server-key.pem \
    -newkey rsa:2048 -config ./openssl.conf

# Sign the CSR

$ openssl ca -batch -passin file:./ca-material/ca-password -config ./openssl.conf \
    -out ./cluster/CLUST.01/server/ESB.DEV.1/server-cert.pem  -extensions v3_server \
    -infiles ./cluster/CLUST.01/server/ESB.DEV.1/server-csr.pem